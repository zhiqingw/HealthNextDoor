{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\wuzhiqing\\\\Documents\\\\GitHub\\\\info30005_front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect } from \"react\"; // TODO - update this to be your url\n\nvar BASE_URL = \"https://healthnextdoortest.herokuapp.com\";\n/*login check used to validate the input with data from the database and let the user log in*/\n\nexport function loginCheck(username, password) {\n  if (!username) {\n    alert(\"must include a username\");\n    return;\n  }\n\n  if (!password) {\n    alert(\"must include password\");\n    return;\n  }\n\n  var endpoint = BASE_URL + \"/login\"; // return fetch query to check whether the password is correct\n\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  }).then(function (res) {\n    if (res.ok) {\n      //store current login status\n      window.sessionStorage.setItem(\"username\", username);\n      window.location.assign(\"user-management/\".concat(username));\n    } else {\n      alert(\"wrong password or username\");\n    }\n  });\n}\n/*sign up check used to validate the input and let the user sign up*/\n\nexport function signupCheck(username, password, confirmed_password) {\n  if (username === \"\") {\n    alert(\"please input a username!\");\n  }\n\n  if (password === \"\") {\n    alert(\"please input a password!\");\n  }\n\n  if (confirmed_password === \"\") {\n    alert(\"please confirm your password!\");\n  }\n\n  if (password !== confirmed_password) {\n    alert(\"password and confirmed password does not match\");\n  }\n\n  var endpoint = BASE_URL + \"/signup\";\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  }).then(function (res) {\n    if (res.ok) {\n      //redirect to user page after user create an account\n      window.sessionStorage.setItem(\"username\", username);\n      window.location.href = \"user-management/\".concat(username);\n    } else {\n      alert(\"This username has already been taken!\");\n      window.location.href = \"SignUp/\";\n    }\n  });\n} //reset the user password\n\nexport function updateUser(user) {\n  var username = user.username,\n      password = user.password;\n\n  if (!password) {\n    alert(\"must include a password\");\n    return;\n  }\n\n  var endpoint = BASE_URL + \"/login/\".concat(username); // return fetch query\n\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  });\n} //return all the user\n\nexport function getUser() {\n  var endpoint = BASE_URL + \"/login\";\n  return fetch(endpoint).then(function (res) {\n    console.log(res);\n    return res.json();\n  });\n}\nexport function useUser() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  useEffect(function () {\n    getUser().then(function (user) {\n      setUser(user);\n      setLoading(false);\n    }).catch(function (e) {\n      console.log(e);\n      setError(e);\n      setLoading(false);\n    });\n  }, []);\n  return {\n    loading,\n    user,\n    error\n  };\n} //get all caregivers\n\nfunction getCaregivers() {\n  var endpoint = BASE_URL + \"/findCaregiver\"; // TODO\n  // return fetch call that gets caregivers list\n\n  return fetch(endpoint).then(function (res) {\n    console.log(res);\n    return res.json();\n  });\n}\n/*addCaregiver used to let user to make a post*/\n\n\nexport function addCaregiver(caregiver) {\n  var first_name = caregiver.first_name,\n      last_name = caregiver.last_name,\n      gender = caregiver.gender,\n      introduction = caregiver.introduction,\n      username = caregiver.username,\n      age = caregiver.age,\n      address = caregiver.address,\n      salary = caregiver.salary,\n      working_experience = caregiver.working_experience,\n      contact_information = caregiver.contact_information;\n\n  if (!gender || !first_name || !last_name || !introduction || !username || !age || !address || !salary || !working_experience || !contact_information) {\n    alert(\"must include all fields\");\n    return;\n  }\n\n  var endpoint = BASE_URL + \"/findCaregiver/\";\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      first_name,\n      last_name,\n      gender,\n      introduction,\n      username,\n      age,\n      address,\n      salary,\n      working_experience,\n      contact_information\n    })\n  }).then(function (res) {\n    if (res.ok) {\n      window.location.href = \"user-management/\".concat(username);\n    } else {\n      alert(\"You already have a post, please update or delete the existed post in user home page!\");\n    }\n  });\n}\n/*updataeCarever used to let user to update post*/\n\nexport function updateCaregiver(caregiver) {\n  var first_name = caregiver.first_name,\n      last_name = caregiver.last_name,\n      gender = caregiver.gender,\n      introduction = caregiver.introduction,\n      username = caregiver.username,\n      age = caregiver.age,\n      address = caregiver.address,\n      salary = caregiver.salary,\n      working_experience = caregiver.working_experience,\n      contact_information = caregiver.contact_information;\n\n  if (!username) {\n    alert(\"must include a username\");\n    return;\n  }\n\n  if (!first_name || !last_name) {\n    alert(\"must include a first name or last name to update\");\n    return;\n  }\n\n  if (!gender) {\n    alert(\"must include gender\");\n    return;\n  }\n\n  if (!introduction) {\n    alert(\"must include an introduction\");\n    return;\n  }\n\n  if (!age) {\n    alert(\"must include an age\");\n    return;\n  }\n\n  if (!address) {\n    alert(\"must include an address\");\n    return;\n  }\n\n  if (!salary) {\n    alert(\"must include a salary\");\n    return;\n  }\n\n  if (!working_experience) {\n    alert(\"must include a working experience\");\n    return;\n  }\n\n  if (!contact_information) {\n    alert(\"must include a contact information\");\n    return;\n  }\n\n  var endpoint = BASE_URL + \"/findCaregiver/\".concat(username);\n  console.log(contact_information.value); // return fetch query to update an author\n\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      first_name,\n      last_name,\n      gender,\n      introduction,\n      username,\n      age,\n      address,\n      salary,\n      working_experience,\n      contact_information\n    })\n  });\n} //use username to delete a post\n\nexport function deleteCaregiver(username) {\n  var endpoint = BASE_URL + \"/findCaregiver/\".concat(username);\n  return fetch(endpoint, {\n    method: \"DELETE\"\n  }).then(function (res) {\n    window.location.href = \"user-management/\".concat(username);\n  });\n}\nexport function useCaregivers() {\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      caregivers = _useState10[0],\n      setCaregivers = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      error = _useState12[0],\n      setError = _useState12[1];\n\n  useEffect(function () {\n    getCaregivers().then(function (caregivers) {\n      setCaregivers(caregivers);\n      setLoading(false);\n    }).catch(function (e) {\n      console.log(e);\n      setError(e);\n      setLoading(false);\n    });\n  }, []);\n  return {\n    loading,\n    caregivers,\n    error\n  };\n} //get all caregivers\n\nfunction getPatients() {\n  var endpoint = BASE_URL + \"/findPatient\"; // TODO\n  // return fetch call that gets caregivers list\n\n  return fetch(endpoint).then(function (res) {\n    console.log(res);\n    return res.json();\n  });\n}\n\nexport function usePatients() {\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      loading = _useState14[0],\n      setLoading = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      patients = _useState16[0],\n      setPatients = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      error = _useState18[0],\n      setError = _useState18[1];\n\n  useEffect(function () {\n    getPatients().then(function (patients) {\n      setPatients(patients);\n      setLoading(false);\n    }).catch(function (e) {\n      console.log(e);\n      setError(e);\n      setLoading(false);\n    });\n  }, []);\n  return {\n    loading,\n    patients,\n    error\n  };\n}\nexport function acceptReq(user) {\n  var username = user.username,\n      name = user.name,\n      state = user.state;\n  var endpoint = BASE_URL + \"/login/\".concat(username); // return fetch query\n\n  console.log(name);\n  console.log(state);\n  var action = [state, name];\n  console.log(action);\n  console.log(JSON.stringify([state, name]));\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      action\n    })\n  });\n}","map":{"version":3,"sources":["C:/Users/wuzhiqing/Documents/GitHub/info30005_front/src/api.js"],"names":["useState","useEffect","BASE_URL","loginCheck","username","password","alert","endpoint","fetch","method","headers","body","JSON","stringify","then","res","ok","window","sessionStorage","setItem","location","assign","signupCheck","confirmed_password","href","updateUser","user","getUser","console","log","json","useUser","loading","setLoading","setUser","error","setError","catch","e","getCaregivers","addCaregiver","caregiver","first_name","last_name","gender","introduction","age","address","salary","working_experience","contact_information","updateCaregiver","value","deleteCaregiver","useCaregivers","caregivers","setCaregivers","getPatients","usePatients","patients","setPatients","acceptReq","name","state","action"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\n\n// TODO - update this to be your url\nconst BASE_URL = \"https://healthnextdoortest.herokuapp.com\";\n\n/*login check used to validate the input with data from the database and let the user log in*/\nexport function loginCheck(username, password) {\n\n  if (!username) {\n    alert(\"must include a username\");\n    return;\n  }\n  if (!password) {\n    alert(\"must include password\");\n    return;\n  }\n\n  const endpoint = BASE_URL + `/login`;\n  // return fetch query to check whether the password is correct\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  }).then(res =>{\n    if(res.ok){\n      //store current login status\n      window.sessionStorage.setItem(\"username\",username);\n      window.location.assign(`user-management/${username}`)\n    }\n    else{\n      alert(\"wrong password or username\");\n    }\n  });\n}\n\n/*sign up check used to validate the input and let the user sign up*/\nexport function signupCheck(username, password, confirmed_password) {\n\n  if (username === \"\") {\n    alert(\"please input a username!\");\n  }\n  if (password === \"\") {\n    alert(\"please input a password!\");\n  }\n  if (confirmed_password === \"\") {\n    alert(\"please confirm your password!\");\n  }\n  if (password !== confirmed_password) {\n    alert(\"password and confirmed password does not match\");\n  }\n\n  const endpoint = BASE_URL + `/signup`;\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  }).then(res =>{\n    if(res.ok){\n      //redirect to user page after user create an account\n      window.sessionStorage.setItem(\"username\",username);\n      window.location.href = `user-management/${username}`;\n    }\n    else{\n      alert(\"This username has already been taken!\");\n      window.location.href = `SignUp/`;\n    }\n  });\n\n}\n//reset the user password\nexport function updateUser(user) {\n  const { username, password} = user;\n  if (!password) {\n    alert(\"must include a password\");\n    return;\n  }\n  const endpoint = BASE_URL + `/login/${username}`;\n// return fetch query\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  });\n}\n\n//return all the user\nexport function getUser() {\n  const endpoint = BASE_URL + `/login`;\n  return fetch(endpoint).then(res => {\n    console.log(res);\n    return res.json();\n  });\n}\n\nexport function useUser() {\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState([]);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    getUser()\n        .then(user => {\n          setUser(user);\n          setLoading(false);\n        })\n        .catch(e => {\n          console.log(e);\n          setError(e);\n          setLoading(false);\n        });\n  }, []);\n\n  return {\n    loading,\n    user,\n    error\n  };\n}\n\n//get all caregivers\nfunction getCaregivers() {\n  const endpoint = BASE_URL + `/findCaregiver`;\n\n  // TODO\n  // return fetch call that gets caregivers list\n  return fetch(endpoint).then(res => {\n    console.log(res);\n    return res.json();\n  });\n}\n/*addCaregiver used to let user to make a post*/\nexport function addCaregiver(caregiver) {\n  const { first_name, last_name, gender, introduction, username, age, address, salary, working_experience,contact_information } = caregiver;\n  if ( !gender|| !first_name || !last_name || !introduction || !username || !age || !address || !salary || !working_experience || !contact_information) {\n    alert(\"must include all fields\");\n    return;\n  }\n\n  const endpoint = BASE_URL + `/findCaregiver/`;\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      first_name,\n      last_name,\n      gender,\n      introduction,\n      username,\n      age,\n      address,\n      salary,\n      working_experience,\n      contact_information,\n    })\n  }).then(res =>{\n    if(res.ok){\n      window.location.href = `user-management/${username}`;\n    }\n    else{\n      alert(\"You already have a post, please update or delete the existed post in user home page!\");\n    }\n  });\n}\n/*updataeCarever used to let user to update post*/\nexport function updateCaregiver(caregiver) {\n  const { first_name, last_name, gender, introduction, username, age, address, salary, working_experience, contact_information } = caregiver;\n  if (!username) {\n    alert(\"must include a username\");\n    return;\n  }\n  if (!first_name || !last_name) {\n    alert(\"must include a first name or last name to update\");\n    return;\n  }\n  if (!gender){\n    alert(\"must include gender\");\n    return;\n  }\n  if (!introduction){\n    alert(\"must include an introduction\");\n    return;\n  }\n  if (!age){\n    alert(\"must include an age\");\n    return;\n  }\n  if (!address){\n    alert(\"must include an address\");\n    return;\n  }\n  if (!salary){\n    alert(\"must include a salary\");\n    return;\n  }\n  if (!working_experience){\n    alert(\"must include a working experience\");\n    return;\n  }\n  if (!contact_information){\n    alert(\"must include a contact information\");\n    return;\n  }\n\n  const endpoint = BASE_URL + `/findCaregiver/${username}`;\n  console.log(contact_information.value);\n  // return fetch query to update an author\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      first_name,\n      last_name,\n      gender,\n      introduction,\n      username,\n      age,\n      address,\n      salary,\n      working_experience,\n      contact_information\n    })\n  });\n\n}\n\n//use username to delete a post\nexport function deleteCaregiver(username) {\n  const endpoint = BASE_URL + `/findCaregiver/${username}`;\n  return fetch(endpoint, {\n    method: \"DELETE\",\n  }).then(res =>{\n      window.location.href = `user-management/${username}`;\n  });\n}\n\nexport function useCaregivers() {\n  const [loading, setLoading] = useState(true);\n  const [caregivers, setCaregivers] = useState([]);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    getCaregivers()\n        .then(caregivers => {\n          setCaregivers(caregivers);\n          setLoading(false);\n        })\n        .catch(e => {\n          console.log(e);\n          setError(e);\n          setLoading(false);\n        });\n  }, []);\n\n  return {\n    loading,\n    caregivers,\n    error\n  };\n}\n\n//get all caregivers\nfunction getPatients() {\n  const endpoint = BASE_URL + `/findPatient`;\n\n  // TODO\n  // return fetch call that gets caregivers list\n  return fetch(endpoint).then(res => {\n    console.log(res);\n    return res.json();\n  });\n}\n\nexport function usePatients() {\n  const [loading, setLoading] = useState(true);\n  const [patients, setPatients] = useState([]);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    getPatients()\n        .then(patients => {\n          setPatients(patients);\n          setLoading(false);\n        })\n        .catch(e => {\n          console.log(e);\n          setError(e);\n          setLoading(false);\n        });\n  }, []);\n\n  return {\n    loading,\n    patients,\n    error\n  };\n}\n\nexport function acceptReq(user) {\n  const { username, name, state} = user;\n  const endpoint = BASE_URL + `/login/${username}`;\n// return fetch query\n  console.log(name);\n  console.log(state);\n  var action = [state, name];\n  console.log(action);\n  console.log(JSON.stringify([state, name]));\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      action\n    })\n  });\n}"]},"metadata":{},"sourceType":"module"}