{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wuzhiqing\\\\Documents\\\\GitHub\\\\info30005_front\\\\src\\\\pages\\\\ToList.js\";\nimport React from \"react\";\nimport { UserExtendedList } from \"./User\";\nimport { acceptReq, acceptReqPatient, declineReq, declineReqPatient, usePatients, updateUser, useCaregivers, useUser } from \"../api\";\nimport Loading from \"../components/Loading\";\nimport { Caregiver } from \"./Caregivers\";\nexport default function ToList() {\n  var _this = this;\n\n  var data = sessionStorage.getItem(\"listing\");\n  var dict_data = JSON.parse(data);\n  console.log(data);\n\n  var _useCaregivers = useCaregivers(),\n      loading_c = _useCaregivers.loading_c,\n      caregivers = _useCaregivers.caregivers,\n      error_c = _useCaregivers.error_c;\n\n  var _usePatients = usePatients(),\n      loading_p = _usePatients.loading_p,\n      patients = _usePatients.patients,\n      error_p = _usePatients.error_p;\n\n  var _useUser = useUser(),\n      loading = _useUser.loading,\n      user = _useUser.user,\n      error = _useUser.error;\n\n  var dict_caregivers;\n  console.log(dict_data);\n  console.log(caregivers);\n\n  if (loading || loading_p || loading_c) {\n    return Loading();\n  }\n\n  if (error || error_p || error_c) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 16\n      }\n    }, \"Something went wrong: \", error.message);\n  }\n\n  var username;\n  username = window.location.pathname;\n  var index;\n  index = username.lastIndexOf('/');\n  var name;\n  name = username.slice(index + 1);\n\n  if (dict_data.identity === \"caregiver\") {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }\n    }, \"List\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"together_block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"history_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"order_list_title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 21\n      }\n    }, \"History\"), user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.orderHistory.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toPatientPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 33\n          }\n        }, name));\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"order_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"order_list_title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 25\n      }\n    }, \"Order List\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 25\n      }\n    }, user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.orderList.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toPatientPage(name, patients);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 41\n          }\n        }, name));\n      });\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"receive_req\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"order_list_title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }\n    }, \"Receive request\"), user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.receiveReq.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toPatientPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 37\n          }\n        }, name), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return accept(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 37\n          }\n        }, \"accept\"), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return decline(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 37\n          }\n        }, \"decline\"));\n      });\n    }))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, \"List\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, \"orderList\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.orderList.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toCaregiverPage(name, caregivers);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 33\n          }\n        }, name));\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, \"sent request\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.sentReq.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toCaregiverPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 33\n          }\n        }, name));\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, \"History\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.orderHistory.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toCaregiverPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 33\n          }\n        }, name));\n      });\n    })));\n  }\n}\n\nfunction accept(name) {\n  var username;\n  username = window.location.pathname;\n  var index;\n  index = username.lastIndexOf('/');\n  username = username.slice(index + 1);\n  acceptReq({\n    username: username,\n    name: name,\n    state: \"accept\"\n  });\n  acceptReqPatient({\n    username: name,\n    name: username,\n    state: \"accept\"\n  }); //window.location.assign(`http://localhost:3000/toList/${window.sessionStorage.getItem(\"username\")}`)\n}\n\nfunction toCaregiverPage(name, caregivers) {\n  //var string_type_username = JSON.stringify(caregiver.username);\n  {\n    caregivers.map(function (caregiver) {\n      if (caregiver.username === name) {\n        var string_type = JSON.stringify(caregiver);\n        sessionStorage.setItem(\"personalInformation\", string_type); //sessionStorage.setItem(\"caregiverUsername\", string_type_username);\n\n        window.location.assign(\"http://localhost:3000/CaregiverInformation/\".concat(caregiver.username));\n      }\n    });\n  }\n} //window.location.assign  (`http://localhost:3000/CaregiverInformation/${name}`);\n//console.log(caregivers);\n//console.log(name);\n\n\nfunction decline(name) {\n  var username;\n  username = window.location.pathname;\n  var index;\n  index = username.lastIndexOf('/');\n  username = username.slice(index + 1);\n  declineReq({\n    username: username,\n    name: name,\n    state: \"decline\"\n  });\n  declineReqPatient({\n    username: name,\n    name: username,\n    state: \"decline\"\n  }); //window.location.assign(`http://localhost:3000/toList/${window.sessionStorage.getItem(\"username\")}`)\n}\n\nfunction toPatientPage(name, patients) {\n  return;\n}","map":{"version":3,"sources":["C:/Users/wuzhiqing/Documents/GitHub/info30005_front/src/pages/ToList.js"],"names":["React","UserExtendedList","acceptReq","acceptReqPatient","declineReq","declineReqPatient","usePatients","updateUser","useCaregivers","useUser","Loading","Caregiver","ToList","data","sessionStorage","getItem","dict_data","JSON","parse","console","log","loading_c","caregivers","error_c","loading_p","patients","error_p","loading","user","error","dict_caregivers","message","username","window","location","pathname","index","lastIndexOf","name","slice","identity","filter","person","map","filteredPerson","orderHistory","toPatientPage","orderList","receiveReq","accept","decline","toCaregiverPage","sentReq","state","caregiver","string_type","stringify","setItem","assign"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {UserExtendedList} from \"./User\";\r\nimport {acceptReq, acceptReqPatient, declineReq, declineReqPatient, usePatients,updateUser, useCaregivers, useUser} from \"../api\";\r\nimport Loading from \"../components/Loading\";\r\nimport {Caregiver} from \"./Caregivers\";\r\n\r\n\r\nexport default function ToList() {\r\n    var data = sessionStorage.getItem(\"listing\");\r\n    var dict_data = JSON.parse(data);\r\n    console.log(data);\r\n    const { loading_c, caregivers, error_c } = useCaregivers();\r\n    const { loading_p, patients, error_p} = usePatients();\r\n    const { loading, user, error} = useUser();\r\n    var dict_caregivers;\r\n    console.log(dict_data);\r\n    console.log(caregivers);\r\n    if (loading || loading_p || loading_c) {\r\n        return Loading();\r\n    }\r\n    if (error || error_p || error_c) {\r\n        return <p>Something went wrong: {error.message}</p>;\r\n    }\r\n    let username;\r\n    username = window.location.pathname;\r\n    let index;\r\n    index = username.lastIndexOf('/');\r\n    let name;\r\n    name = username.slice(index+1);\r\n    if(dict_data.identity === \"caregiver\") {\r\n        return (\r\n            <div>\r\n                <h1>List</h1>\r\n                <div id={\"together_block\"}>\r\n\r\n                <div id={\"history_list\"}>\r\n                    <div id={\"order_list_title\"}>\r\n                        History\r\n                    </div>\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.orderHistory.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toPatientPage(name)}>\r\n                                    {name}\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n\r\n                    <div id={\"order_list\"}>\r\n                        <div id={\"order_list_title\"}>\r\n                            Order List\r\n                        </div>\r\n                        <div>\r\n                            {user.filter(person => person.username === name).map(filteredPerson => (\r\n                                filteredPerson.orderList.map(name => (\r\n                                    <p>\r\n                                        <button onClick={() => toPatientPage(name, patients)}>\r\n                                            {name}\r\n                                        </button>\r\n                                    </p>\r\n                                ))\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div id={\"receive_req\"}>\r\n                        <div id={\"order_list_title\"}>\r\n                            Receive request\r\n                        </div>\r\n                        {user.filter(person => person.username === name).map(filteredPerson => (\r\n                            filteredPerson.receiveReq.map(name => (\r\n                                <p>\r\n                                    <button onClick={() => toPatientPage(name)}>\r\n                                        {name}\r\n                                    </button>\r\n                                    <button onClick={() => accept(name)}>\r\n                                        accept\r\n                                    </button>\r\n                                    <button onClick={() => decline(name)}>\r\n                                        decline\r\n                                    </button>\r\n                                </p>\r\n                            ))\r\n                        ))}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }else{\r\n        return (\r\n            <div>\r\n                <h1>List</h1>\r\n                <div>\r\n                    orderList\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.orderList.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toCaregiverPage(name,caregivers)}>\r\n                                    {name}\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n                <div>\r\n                    sent request\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.sentReq.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toCaregiverPage(name)}>\r\n                                    {name}\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n                <div>\r\n                    History\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.orderHistory.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toCaregiverPage(name)}>\r\n                                    {name}\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction accept(name){\r\n    let username;\r\n    username = window.location.pathname;\r\n    let index;\r\n    index = username.lastIndexOf('/');\r\n    username = username.slice(index+1);\r\n    acceptReq({\r\n        username: username,\r\n        name: name,\r\n        state: \"accept\",\r\n    });\r\n    acceptReqPatient({\r\n        username: name,\r\n        name: username,\r\n        state: \"accept\",\r\n    });\r\n    //window.location.assign(`http://localhost:3000/toList/${window.sessionStorage.getItem(\"username\")}`)\r\n\r\n}\r\n\r\nfunction toCaregiverPage(name, caregivers) {\r\n\r\n    //var string_type_username = JSON.stringify(caregiver.username);\r\n    {\r\n        caregivers.map(caregiver => {\r\n            if (caregiver.username === name) {\r\n                var string_type = JSON.stringify(caregiver);\r\n                sessionStorage.setItem(\"personalInformation\", string_type);\r\n                //sessionStorage.setItem(\"caregiverUsername\", string_type_username);\r\n                window.location.assign(`http://localhost:3000/CaregiverInformation/${caregiver.username}`);\r\n            }\r\n        })\r\n    }\r\n}\r\n    //window.location.assign  (`http://localhost:3000/CaregiverInformation/${name}`);\r\n    //console.log(caregivers);\r\n    //console.log(name);\r\n\r\nfunction decline(name){\r\n    let username;\r\n    username = window.location.pathname;\r\n    let index;\r\n    index = username.lastIndexOf('/');\r\n    username = username.slice(index+1);\r\n    declineReq({\r\n        username: username,\r\n        name: name,\r\n        state: \"decline\",\r\n    });\r\n    declineReqPatient({\r\n        username: name,\r\n        name: username,\r\n        state: \"decline\",\r\n    });\r\n    //window.location.assign(`http://localhost:3000/toList/${window.sessionStorage.getItem(\"username\")}`)\r\n\r\n}\r\n\r\n\r\nfunction toPatientPage(name, patients) {\r\n    return\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}