{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wuzhiqing\\\\Documents\\\\GitHub\\\\info30005_front\\\\src\\\\pages\\\\ToList.js\";\nimport React from \"react\";\nimport { UserExtendedList } from \"./User\";\nimport { acceptReq, acceptReqPatient, updateUser, useCaregivers, useUser } from \"../api\";\nimport Loading from \"../components/Loading\";\nimport { Caregiver } from \"./Caregivers\";\nexport default function ToList() {\n  var _this = this;\n\n  var data = sessionStorage.getItem(\"listing\");\n  var dict_data = JSON.parse(data);\n  console.log(data);\n\n  var _useUser = useUser(),\n      loading = _useUser.loading,\n      user = _useUser.user,\n      error = _useUser.error;\n\n  console.log(user);\n\n  if (loading) {\n    return Loading();\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 16\n      }\n    }, \"Something went wrong: \", error.message);\n  }\n\n  var username;\n  username = window.location.pathname;\n  var index;\n  index = username.lastIndexOf('/');\n  var name;\n  name = username.slice(index + 1);\n\n  if (dict_data.identity === \"Caregiver\") {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 17\n      }\n    }, \"List\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }, \"orderList\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.orderList.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toUserPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 37\n          }\n        }, name));\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    }, \"Receive request\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.receiveReq.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toUserPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 33\n          }\n        }, name), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return accept(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 33\n          }\n        }, \"accept\"));\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }, \"History\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.orderHistory.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toUserPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 33\n          }\n        }, name));\n      });\n    })));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, \"List\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"orderList\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.orderList.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toUserPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 33\n          }\n        }, name));\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, \"sent request\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.sentReq.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toUserPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 33\n          }\n        }, name));\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, \"History\", user.filter(function (person) {\n      return person.username === name;\n    }).map(function (filteredPerson) {\n      return filteredPerson.orderHistory.map(function (name) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return toUserPage(name);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 33\n          }\n        }, name));\n      });\n    })));\n  }\n}\n\nfunction accept(name) {\n  var username;\n  username = window.location.pathname;\n  var index;\n  index = username.lastIndexOf('/');\n  username = username.slice(index + 1);\n  acceptReq({\n    username: username,\n    name: name,\n    state: \"accept\"\n  });\n  acceptReqPatient({\n    username: name,\n    name: username,\n    state: \"accept\"\n  }); //window.location.assign(`http://localhost:3000/toList/${window.sessionStorage.getItem(\"username\")}`)\n}\n\nfunction toUserPage(name) {\n  window.location.assign(\"http://localhost:3000/CaregiverInformation/\".concat(name));\n}","map":{"version":3,"sources":["C:/Users/wuzhiqing/Documents/GitHub/info30005_front/src/pages/ToList.js"],"names":["React","UserExtendedList","acceptReq","acceptReqPatient","updateUser","useCaregivers","useUser","Loading","Caregiver","ToList","data","sessionStorage","getItem","dict_data","JSON","parse","console","log","loading","user","error","message","username","window","location","pathname","index","lastIndexOf","name","slice","identity","filter","person","map","filteredPerson","orderList","toUserPage","receiveReq","accept","orderHistory","sentReq","state","assign"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {UserExtendedList} from \"./User\";\r\nimport {acceptReq, acceptReqPatient, updateUser, useCaregivers, useUser} from \"../api\";\r\nimport Loading from \"../components/Loading\";\r\nimport {Caregiver} from \"./Caregivers\";\r\n\r\nexport default function ToList() {\r\n    var data = sessionStorage.getItem(\"listing\")\r\n    var dict_data = JSON.parse(data)\r\n    console.log(data);\r\n    const { loading, user, error} = useUser();\r\n    console.log(user);\r\n    if (loading) {\r\n        return Loading();\r\n    }\r\n    if (error) {\r\n        return <p>Something went wrong: {error.message}</p>;\r\n    }\r\n    let username;\r\n    username = window.location.pathname;\r\n    let index;\r\n    index = username.lastIndexOf('/');\r\n    let name;\r\n    name = username.slice(index+1);\r\n    if(dict_data.identity === \"Caregiver\") {\r\n        return (\r\n            <div>\r\n                <h1>List</h1>\r\n                <div>\r\n                    orderList\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.orderList.map(name => (\r\n                                <p>\r\n                                    <button onClick={() => toUserPage(name)}>\r\n                                        {name}\r\n                                    </button>\r\n                                </p>\r\n                            ))\r\n                    ))}\r\n                </div>\r\n                <div>\r\n                    Receive request\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.receiveReq.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toUserPage(name)}>\r\n                                    {name}\r\n                                </button>\r\n                                <button onClick={() => accept(name)}>\r\n                                    accept\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n                <div>\r\n                    History\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.orderHistory.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toUserPage(name)}>\r\n                                    {name}\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }else{\r\n        return (\r\n            <div>\r\n                <h1>List</h1>\r\n                <div>\r\n                    orderList\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.orderList.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toUserPage(name)}>\r\n                                    {name}\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n                <div>\r\n                    sent request\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.sentReq.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toUserPage(name)}>\r\n                                    {name}\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n                <div>\r\n                    History\r\n                    {user.filter(person => person.username === name).map(filteredPerson => (\r\n                        filteredPerson.orderHistory.map(name => (\r\n                            <p>\r\n                                <button onClick={() => toUserPage(name)}>\r\n                                    {name}\r\n                                </button>\r\n                            </p>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction accept(name){\r\n    let username;\r\n    username = window.location.pathname;\r\n    let index;\r\n    index = username.lastIndexOf('/');\r\n    username = username.slice(index+1);\r\n    acceptReq({\r\n        username: username,\r\n        name: name,\r\n        state: \"accept\",\r\n    });\r\n    acceptReqPatient({\r\n        username: name,\r\n        name: username,\r\n        state: \"accept\",\r\n    });\r\n    //window.location.assign(`http://localhost:3000/toList/${window.sessionStorage.getItem(\"username\")}`)\r\n\r\n}\r\n\r\nfunction toUserPage(name){\r\n    window.location.assign  (`http://localhost:3000/CaregiverInformation/${name}`);\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}